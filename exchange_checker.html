<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="google-adsense-account" content="ca-pub-2384775227983330">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title data-i18n="page.htmlTitle" data-i18n-source="exchange">イベント交換所チェッカー - おサボりツール</title>
    
    <!-- ファビコン -->
    <link rel="icon" type="image/png" sizes="32x32" href="images/others/favicon32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/others/favicon16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/others/favicon180.png">
    <!-- CSS -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/tabs.css">
    <link rel="stylesheet" href="css/exchange_checker.css">
    <link rel="stylesheet" href="css/footer.css">

    <!-- Font Awesome CDN -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!-- 背景 -->
    <div id="backgroundLayer" class="background-layer"></div>

    <!-- グローバルヘッダー -->
    <header class="global-header" id="globalHeader">
        <!-- 上段:ハンバーガー + アイコン + サイト名 + タブ + 言語 -->
        <div class="header-main">
            <button class="header-hamburger" id="headerHamburger" aria-label="メニューを開く">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            <div class="header-icon" id="headerIcon">
                <!-- 将来アイコンを入れる場所 -->
            </div>
            <span class="header-title">
                <span class="text-ja">おサボりツール</span>
                <span class="text-en">Laru's Lazy Tools</span>
            </span>
            <ul class="header-tabs" id="headerTabs">
                <li><a href="index.html" class="header-tab-link">
                    <span class="text-ja">TOP</span>
                    <span class="text-en">TOP</span>
                </a></li>
                <li><a href="simu_potential.html" class="header-tab-link">
                    <span class="text-ja">素質シミュ</span>
                    <span class="text-en">Potential Sim</span>
                </a></li>
                <li><a href="exchange_checker.html" class="header-tab-link active">
                    <span class="text-ja">交換所</span>
                    <span class="text-en">Exchange</span>
                </a></li>
                <li><a href="simu_commission.html" class="header-tab-link">
                    <span class="text-ja">依頼シミュ</span>
                    <span class="text-en">Commission Sim</span>
                </a></li>
            </ul>
            <div class="header-extra-btns" id="headerExtraBtns">
                <div id="kofi-widget-container" style="display: inline-block; margin-right: 8px;"></div>
                <button id="showChangelog" class="btn btn-info header-extra-btn">
                    <span class="text-ja">更新履歴</span>
                    <span class="text-en">Changelog</span>
                </button>
            </div>
            <div class="header-lang">
                <button class="header-lang-btn" id="headerLangBtn">English</button>
            </div>
        </div>
        <!-- 下段：ページ固有コントロール（JSで移植される） -->
        <div class="header-controls" id="headerControls">
        </div>
    </header>

    <!-- サイドメニュー -->
    <nav class="side-menu" id="sideMenu">
        <div class="side-menu-header">
            <span class="text-ja">メニュー</span>
            <span class="text-en">Menu</span>
        </div>
        <ul class="side-menu-list">
            <li><a href="index.html">
                <span class="text-ja">TOP</span>
                <span class="text-en">TOP</span>
            </a></li>
            <li><a href="simu_potential.html">
                <span class="text-ja">素質シミュレーター</span>
                <span class="text-en">Potential Sim</span>
            </a></li>
            <li><a href="exchange_checker.html" class="menu-item-current">
                <span class="text-ja">交換所チェッカー</span>
                <span class="text-en">Exchange</span>
            </a></li>
            <li><a href="simu_commission.html">
                <span class="text-ja">依頼シミュレーター</span>
                <span class="text-en">Commission Sim</span>
            </a></li>
        <!-- 
            <li><span class="menu-item-disabled">
                <span class="text-ja">（予定）昇格に必要な素材数計算機</span>
                <span class="text-en">(Planned) Material Calculator</span>
            </span></li>
            <li><span class="menu-item-disabled">
                <span class="text-ja">（予定）素材逆引き</span>
                <span class="text-en">(Planned) Material Lookup</span>
            </span></li>
            <li><span class="menu-item-disabled">
                <span class="text-ja">（予定）星ノ塔クイズのカンペ</span>
                <span class="text-en">(Planned) Star Tower Quiz</span>
            </span></li>
            <li><span class="menu-item-disabled">
                <span class="text-ja">（予定）無限リングのバフ早見表</span>
                <span class="text-en">(Planned) Infinite Ring Buffs</span>
            </span></li>
            <li><span class="menu-item-disabled">
                <span class="text-ja">（予定）未実装キャラメモ</span>
                <span class="text-en">(Planned) Unreleased Characters</span>
            </span></li>
            <li><span class="menu-item-disabled">
                <span class="text-ja">（予定）ココチャまとめ</span>
                <span class="text-en">(Planned) Cocotya Summary</span>
            </span></li>
        -->
        </ul>
    </nav>
    
    <!-- メニューオーバーレイ -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- ページ固有コントロール（ヘッダー下段に移植される） -->
    <div id="pageControls">
        <button id="resetProgress" class="btn">
            <span class="text-ja">進捗リセット</span>
            <span class="text-en">Reset Progress</span>
        </button>
        <button id="resetAll" class="btn btn-danger">
            <span class="text-ja">初期化</span>
            <span class="text-en">Reset All</span>
        </button>
        <button id="showUsage" class="btn btn-info">
            <span class="text-ja">使い方</span>
            <span class="text-en">How to Use</span>
        </button>
    </div>

    <!-- メインコンテンツ -->
    <main class="main-content">
            <!-- イベント選択エリア -->
            <div class="event-selector">
                <label for="eventSelect" data-i18n="labels.event" data-i18n-source="exchange">イベント：</label>
                <select id="eventSelect" class="event-select">
                    <option value="">-</option>
                </select>
            </div>

            <!-- イベント情報表示エリア -->
            <div id="eventInfo" class="event-info hidden">
                <!-- 3カラムレイアウト -->
                <div class="three-column-layout">
                    <!-- 左カラム：計算結果サマリー -->
                    <div class="column column-left">
                        <h2 data-i18n="section.calcResult" data-i18n-source="exchange">計算結果</h2>
                        
                        <!-- 現在のポイント入力 -->
                        <div class="current-points-section">
                            <label for="currentPoints" data-i18n="labels.currentPoints" data-i18n-source="exchange">所持ポイント数</label>
                            <input type="number" id="currentPoints" min="0" max="999999" value="0" class="points-input" inputmode="numeric" pattern="[0-9]*">
                            <div class="points-buttons">
                                <button id="pointsDecrease" class="points-btn points-btn-minus">-<span id="pointsDecreaseAmount">400</span></button>
                                <img id="pointIcon" src="" alt="" class="point-icon">
                                <button id="pointsIncrease" class="points-btn points-btn-plus">+<span id="pointsIncreaseAmount">400</span></button>
                            </div>
                        </div>

                        <div class="summary-section">
                            <div class="summary-card">
                                <div class="summary-label" data-i18n="summary.remainingDays" data-i18n-source="exchange">残り日数</div>
                                <div class="summary-value" id="remainingDays">-</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label" data-i18n="summary.remainingNeeded" data-i18n-source="exchange">残り周回ポイント</div>
                                <div class="summary-value highlight" id="remainingNeeded">0</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label" data-i18n="summary.dailyQuota" data-i18n-source="exchange">1日あたりのノルマ</div>
                                <div class="summary-value highlight" id="dailyQuota">0周</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label" data-i18n="summary.dailyStamina" data-i18n-source="exchange">1日あたりのやる気</div>
                                <div class="summary-value highlight" id="dailyStamina">0</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label" data-i18n="summary.runsNeeded" data-i18n-source="exchange">あと何周？</div>
                                <div class="summary-value highlight" id="runsNeeded">0</div>
                            </div>
                            <div class="summary-card">
                                <div class="summary-label" data-i18n="summary.totalNeeded" data-i18n-source="exchange">欲しいもの全交換ノルマ</div>
                                <div class="summary-value" id="totalNeeded">0</div>
                            </div>
                        </div>
                    </div>

                    <!-- 中央カラム：交換所報酬 -->
                    <div class="column column-center">
                        <h2 data-i18n="section.lineup" data-i18n-source="exchange">ラインナップ</h2>
                        <div id="rewardsGrid" class="rewards-grid">
                            <!-- 報酬アイテムはJavaScriptで動的に生成 -->
                        </div>
                    </div>

                    <!-- 右カラム:ミッション報酬 -->
                    <div class="column column-right">
                        <div class="mission-header">
                            <h2 data-i18n="section.clearReward" data-i18n-source="exchange">クリア報酬</h2>
                            <label class="mission-filter">
                                <input type="checkbox" id="hideCompletedMissions">
                                <span data-i18n="labels.hideCompleted" data-i18n-source="exchange">クリア済を非表示</span>
                            </label>
                        </div>
                        <div class="mission-summary">
                            <div class="mission-total">
                                <span data-i18n="mission.totalPoints" data-i18n-source="exchange">全達成の合計：</span>
                                <span id="totalMissionPoints">0</span>
                            </div>
                            <div class="mission-remaining">
                                <span data-i18n="mission.remainingPoints" data-i18n-source="exchange">残り獲得可能：</span>
                                <span id="remainingMissionPoints">0</span>
                            </div>
                            <div class="mission-earned">
                                <span data-i18n="mission.earnedPoints" data-i18n-source="exchange">獲得済み：</span>
                                <span id="earnedMissionPoints">0</span>
                            </div>
                        </div>
                        <div id="missionsGrid" class="missions-grid">
                            <!-- ミッション報酬はJavaScriptで動的に生成 -->
                        </div>
                        <div id="compMissionsGrid" class="missions-grid" style="margin-top: 15px;">
                            <!-- コンプリートミッション報酬はJavaScriptで動的に生成 -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- 広告エリア（ページ下部） -->
        <div style="text-align: center; margin: 40px 0;">
            <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2384775227983330"
                 crossorigin="anonymous"></script>
            <!-- 交換所ページ下部広告 -->
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-2384775227983330"
                 data-ad-slot="2222222222"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>
    </main>

    <!-- 使い方モーダル -->
    <div id="usageModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.usage.title" data-i18n-source="exchange">使い方</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong data-i18n="modal.usage.step1Title" data-i18n-source="exchange"></strong><br>
                <span data-i18n-html="modal.usage.step1Text" data-i18n-source="exchange"></span></p>
                
                <p><strong data-i18n="modal.usage.step2Title" data-i18n-source="exchange"></strong><br>
                <span data-i18n-html="modal.usage.step2Text" data-i18n-source="exchange"></span></p>
                
                <p><strong data-i18n="modal.usage.step3Title" data-i18n-source="exchange"></strong><br>
                <span data-i18n-html="modal.usage.step3Text" data-i18n-source="exchange"></span></p>
                
                <p><strong data-i18n="modal.usage.step4Title" data-i18n-source="exchange"></strong><br>
                <span data-i18n-html="modal.usage.step4Text" data-i18n-source="exchange"></span></p>
                
                <p><strong data-i18n="modal.usage.step5Title" data-i18n-source="exchange"></strong><br>
                <span data-i18n-html="modal.usage.step5Text" data-i18n-source="exchange"></span></p>
            </div>
        </div>
    </div>

    <!-- 更新履歴モーダル -->
    <div id="changelogModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="buttons.changelog" data-i18n-source="common">更新履歴</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <!-- 更新履歴はchangelog.jsで動的生成 -->
            </div>
        </div>
    </div>

    <!-- 自動マイグレーション（新ドメイン用） -->
    <script src="js/common/auto-migration.js"></script>
    <!-- i18n -->
    <script src="js/common/i18n.js"></script>
    <script src="js/common/image-i18n.js"></script>
    <!-- 共通JS -->
    <script src="js/common/utils.js"></script>
    <script src="js/common/menu.js"></script>
    <script src="js/common/changelog.js"></script>
    
    <!-- ページ固有JS -->
    <script src="js/exchange_checker.js"></script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VF5Z9GRDFF"></script>
    <script>initGoogleAnalytics('G-VF5Z9GRDFF');</script>
    
    
    <!-- フッター -->
    <footer class="site-footer">
        <div class="footer-links">
            <!-- Ko-fi -->
            <div class="footer-button">
                <script type='text/javascript' src='https://storage.ko-fi.com/cdn/widget/Widget_2.js'></script>
                <script type='text/javascript'>kofiwidget2.init('Ko-fi', '#72a4f2', 'E1E61QLW8Q');kofiwidget2.draw();</script>
            </div>
            
            <!-- X (Twitter) -->
            <a href="https://x.com/denko_gaminggal" target="_blank" style="font-size: 14px; color: #ffffff;" rel="noopener noreferrer" class="footer-button footer-button-x" title="X (Twitter)">
                <i class="fa-brands fa-x-twitter"></i>
                <span> @denko_gaminggal</span>
            </a>
            
            <!-- note -->
            <a href="https://note.com/denkonote/n/nc40b6140ad00?sub_rt=share_pb" target="_blank" rel="noopener noreferrer" class="footer-button footer-button-note" title="note">
                <img src="images/others/logo_note.png" alt="note" class="note-logo">
                <span data-i18n="footer.note">note</span>
            </a>
            
            <!-- プライバシーポリシー -->
            <a href="privacy.html" target="_blank" style="font-size: 14px; color: #000000;"  rel="noopener noreferrer" class="footer-button footer-button-privacy" data-i18n="footer.privacy">
                プライバシーポリシー
            </a>
        </div>
        
        <div class="footer-copyright">
            <p><span data-i18n="footer.copyright">©Yostar</span></p>
            <p><span data-i18n="footer.disclaimer">本サイトはステラソラの非公式ファンサイトであり、Yostarとは一切関係ありません。使用されているゲーム画像、情報の所有権および著作権はそれぞれの権利者に帰属します。</span></p>
        </div>
    </footer>

</body>
</html>
