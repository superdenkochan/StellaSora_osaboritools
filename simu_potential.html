<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="google-adsense-account" content="ca-pub-2384775227983330">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title data-i18n="page.htmlTitle" data-i18n-source="potential">素質シミュレーター - おサボりツール</title>
    
    <!-- ファビコン -->
    <link rel="icon" type="image/png" sizes="32x32" href="images/others/favicon32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="images/others/favicon16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="images/others/favicon180.png">
    <!-- CSS -->
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/tabs.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- グローバルヘッダー -->
    <header class="global-header" id="globalHeader">
        <!-- 上段：ハンバーガー + アイコン + サイト名 + タブ + 言語 -->
        <div class="header-main">
            <button class="header-hamburger" id="headerHamburger" aria-label="メニューを開く">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
            <div class="header-icon" id="headerIcon">
                <!-- 将来アイコンを入れる場所 -->
            </div>
            <span class="header-title">
                <span class="text-ja">おサボりツール</span>
                <span class="text-en">Laru's Lazy Tools</span>
            </span>
            <ul class="header-tabs" id="headerTabs">
                <li><a href="index.html" class="header-tab-link">
                    <span class="text-ja">TOP</span>
                    <span class="text-en">TOP</span>
                </a></li>
                <li><a href="simu_potential.html" class="header-tab-link active">
                    <span class="text-ja">素質シミュ</span>
                    <span class="text-en">Potential Sim</span>
                </a></li>
                <li><a href="exchange_checker.html" class="header-tab-link">
                    <span class="text-ja">交換所</span>
                    <span class="text-en">Exchange</span>
                </a></li>
                <li><a href="simu_commission.html" class="header-tab-link">
                    <span class="text-ja">依頼シミュ</span>
                    <span class="text-en">Commission Sim</span>
                </a></li>
            </ul>
            <div class="header-extra-btns" id="headerExtraBtns">
                <button id="showChangelog" class="btn btn-info header-extra-btn" data-i18n="buttons.changelog" data-i18n-source="common">変更履歴</button>
            </div>
            <div class="header-lang">
                <button class="header-lang-btn" id="headerLangBtn">English</button>
            </div>
        </div>
        <!-- 下段：ページ固有コントロール（JSで移植される） -->
        <div class="header-controls" id="headerControls">
        </div>
    </header>
    
    <!-- サイドメニュー -->
    <nav class="side-menu" id="sideMenu">
        <div class="side-menu-header" data-i18n="menu.header">メニュー</div>
        <ul class="side-menu-list">
            <li><a href="index.html" data-i18n="menu.top">TOP</a></li>
            <li><a href="simu_potential.html" class="menu-item-current" data-i18n="menu.potential">素質シミュ</a></li>
            <li><a href="exchange_checker.html" data-i18n="menu.exchange">交換所</a></li>
            <li><a href="simu_commission.html" data-i18n="menu.commission">依頼シミュ</a></li>
            <li><span class="menu-item-disabled" data-i18n="menu.planned.materials">（予定）昇格に必要な素材数計算機</span></li>
            <li><span class="menu-item-disabled" data-i18n="menu.planned.reverse">（予定）素材逆引き</span></li>
            <li><span class="menu-item-disabled" data-i18n="menu.planned.quiz">（予定）星ノ塔クイズのカンペ</span></li>
            <li><span class="menu-item-disabled" data-i18n="menu.planned.ring">（予定）無限リングのバフ早見表</span></li>
            <li><span class="menu-item-disabled" data-i18n="menu.planned.unreleased">（予定）未実装キャラメモ</span></li>
            <li><span class="menu-item-disabled" data-i18n="menu.planned.cocotya">（予定）ココチャまとめ</span></li>
        </ul>
    </nav>
    
    <!-- メニューオーバーレイ -->
    <div class="menu-overlay" id="menuOverlay"></div>

    <!-- ページ固有コントロール（ヘッダー下段に移植される） -->
    <div id="pageControls">
        <button id="hideUnobtained" class="toggle-button">
            <span class="toggle-checkbox"></span>
            <span class="toggle-label" data-i18n="buttons.hideUnobtained" data-i18n-source="potential">取得しない素質を非表示</span>
        </button>
        <button id="resetCount" class="btn" data-i18n="buttons.resetCount" data-i18n-source="potential">カウントリセット</button>
        <button id="resetAll" class="btn btn-danger" data-i18n="buttons.reset" data-i18n-source="potential">初期化</button>
        <button id="screenshot" class="btn btn-primary" data-i18n="buttons.screenshot" data-i18n-source="potential">スクショ</button>
        <button id="showUsage" class="btn btn-info" data-i18n="buttons.usage" data-i18n-source="potential">使い方</button>
    </div>

    <!-- メインコンテンツ -->
    <main class="main-content">
            <!-- キャラクター選択＋素質表示エリア -->
            <div class="characters-area">
                <!-- プリセット名表示・編集エリア -->
                <div id="preset-name-container" style="text-align: center; white-space: nowrap; margin-bottom: 2px; padding: 8px; background: rgba(255,255,255,0.75); border-radius: 4px;">
                    <div id="preset-name-display-area" style="display: flex; align-items: center; justify-content: center; gap: 0px;">
                        <span style="font-size: 14px; color: #252a42; font-weight: bold;">プリセット名:</span>
                        <input type="text" id="preset-name-input-inline" maxlength="20" placeholder="（未設定）" 
                               style="font-size: 14px; color: #40539f; font-weight: bold; border: 2px solid transparent; background: transparent; padding: 0px; width: 300px; text-align: center; outline: none;"
                               readonly>
                        <button id="preset-name-edit-btn" class="btn" style="padding: 5px 12px; font-size: 14px;">✎ 編集</button>
                    </div>
                </div>
                
                <!-- スクリーンショット用フッター（通常は非表示） -->
                <div id="screenshot-footer" style="display: none; text-align: center; padding: 4px; background: rgba(37,42,66,1); border-top: 2px solid #252a42; margin-top: 4px;">
                    <p style="margin: 0; font-size: 14px; color: #ffffff;">
                        ステラソラ おサボりツール - 素質シミュレーター
                        <a href="https://superdenkochan.github.io/StellaSora_osaboritools/" style="color: #ffffff; text-decoration: none;"></a>
                    </p>
                </div>
                <!-- キャラクター1（主力） -->
                <div class="character-section" data-slot="main">
                    <div class="character-header">
                        <div class="character-label">
                            <img src="images/others/label_main_ja.png" alt="主力" data-i18n-auto>
                        </div>
                        <div class="character-select-wrapper">
                            <button class="character-select-button" data-slot="main">
                                <span class="select-text">巡遊者<br>選択</span>
                            </button>
                            <!-- 互換性のため隠しselect -->
                            <select class="character-select" data-slot="main">
                                <option value="">巡遊者選択</option>
                            </select>
                        </div>
                    </div>
                    <div class="potentials-container" id="main-potentials">
                        <!-- 素質はJavaScriptで動的に生成 -->
                    </div>
                </div>

                <!-- キャラクター2（支援1） -->
                <div class="character-section" data-slot="support1">
                    <div class="character-header">
                        <div class="character-label">
                            <img src="images/others/label_support_ja.png" alt="支援" data-i18n-auto>
                        </div>
                        <div class="character-select-wrapper">
                            <button class="character-select-button" data-slot="support1">
                                <span class="select-text">巡遊者<br>選択</span>
                            </button>
                            <select class="character-select" data-slot="support1">
                                <option value="">巡遊者選択</option>
                            </select>
                        </div>
                    </div>
                    <div class="potentials-container" id="support1-potentials">
                        <!-- 素質はJavaScriptで動的に生成 -->
                    </div>
                </div>

                <!-- キャラクター3（支援2） -->
                <div class="character-section" data-slot="support2">
                    <div class="character-header">
                        <div class="character-label">
                            <img src="images/others/label_support_ja.png" alt="支援" data-i18n-auto>
                        </div>
                        <div class="character-select-wrapper">
                            <button class="character-select-button" data-slot="support2">
                                <span class="select-text">巡遊者<br>選択</span>
                            </button>
                            <select class="character-select" data-slot="support2">
                                <option value="">巡遊者選択</option>
                            </select>
                        </div>
                    </div>
                    <div class="potentials-container" id="support2-potentials">
                        <!-- 素質はJavaScriptで動的に生成 -->
                    </div>
                </div>
            </div>

            <!-- プリセット管理エリア（下段配置） -->
            <aside class="presets-area">
                <h3 data-i18n="preset.title">プリセット</h3>
                <div class="presets-list">
                    <!-- プリセット1～10 -->
                    <div class="preset-item" data-preset="1">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット1" class="preset-icon" style="display: none;">
                            <span class="preset-number">1</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="1" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="1" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                    <div class="preset-item" data-preset="2">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット2" class="preset-icon" style="display: none;">
                            <span class="preset-number">2</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="2" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="2" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                    <div class="preset-item" data-preset="3">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット3" class="preset-icon" style="display: none;">
                            <span class="preset-number">3</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="3" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="3" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                    <div class="preset-item" data-preset="4">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット4" class="preset-icon" style="display: none;">
                            <span class="preset-number">4</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="4" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="4" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                    <div class="preset-item" data-preset="5">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット5" class="preset-icon" style="display: none;">
                            <span class="preset-number">5</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="5" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="5" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                    <div class="preset-item" data-preset="6">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット6" class="preset-icon" style="display: none;">
                            <span class="preset-number">6</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="6" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="6" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                    <div class="preset-item" data-preset="7">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット7" class="preset-icon" style="display: none;">
                            <span class="preset-number">7</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="7" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="7" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                    <div class="preset-item" data-preset="8">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット8" class="preset-icon" style="display: none;">
                            <span class="preset-number">8</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="8" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="8" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                    <div class="preset-item" data-preset="9">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット9" class="preset-icon" style="display: none;">
                            <span class="preset-number">9</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="9" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="9" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                    <div class="preset-item" data-preset="10">
                        <div class="preset-thumbnail">
                            <img src="" alt="プリセット10" class="preset-icon" style="display: none;">
                            <span class="preset-number">10</span>
                        </div>
                        <div class="preset-actions">
                            <button class="btn-save" data-preset="10" data-i18n="buttons.save">保存</button>
                            <button class="btn-load" data-preset="10" disabled data-i18n="buttons.load">読み込み</button>
                        </div>
                    </div>
                </div>
            </aside>
        </div>

        <!-- エラーメッセージ表示エリア -->
        <div id="errorMessage" class="error-message hidden"></div>
    </div>

    <!-- 使い方モーダル -->
    <div id="usageModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.usage.title" data-i18n-source="potential">使い方</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <h3 data-i18n="modal.usage.basic" data-i18n-source="potential">基本操作</h3>
                <p><strong data-i18n="modal.usage.step1Title" data-i18n-source="potential">1. 巡遊者を選択！</strong><br>
                <span data-i18n-html="modal.usage.step1Text" data-i18n-source="potential">アイコンをクリックして選んでね。<br>
                素質カードは主力と支援で自動で切り替わるから気にしなくていいよ～</span></p>
                
                <p><strong data-i18n="modal.usage.step2Title" data-i18n-source="potential">2. コア素質</strong><br>
                <span data-i18n-html="modal.usage.step2Text" data-i18n-source="potential">「取得する/取得しない」ボタンをクリックして、取りたい素質を選ぼう！<br>
                ゲームの仕様と同じで2つまでしか選べないようにしてるよ</span></p>
                
                <p><strong data-i18n="modal.usage.step3Title" data-i18n-source="potential">3. サブ素質</strong><br>
                <span data-i18n-html="modal.usage.step3Text" data-i18n-source="potential">ボタンをクリックすると<br>
                [取得しない]→[レベル1]→[レベル1～]→[レベル6]の順に切り替わるよ<br>
                絶対レベル6にしたい素質だとか、レベル1止めでいい素質とか<br>
                優先度低いけど可能な限り上げたい素質とかを分けられて便利だね！<br>
                これやりたいがためにこのツールを作ったし！</span></p>
                
                <p><strong data-i18n="modal.usage.step4Title" data-i18n-source="potential">4. 素質レベルカウント</strong><br>
                <span data-i18n-html="modal.usage.step4Text" data-i18n-source="potential">素質カードの画像部分をクリックするとレベルが上がっていくよ<br>
                2窓して登りながらポチポチすると、いちいちゲーム側で確認しなくて便利だね<br>
                コア素質をクリックするとチェックマークが付くよ</span></p>
                
                <h3 data-i18n="modal.usage.others" data-i18n-source="potential">その他色々</h3>
                <p><strong data-i18n="modal.usage.hideTitle" data-i18n-source="potential">取得しない素質を非表示</strong><br>
                <span data-i18n-html="modal.usage.hideText" data-i18n-source="potential">チェックを入れると、「取得しない」素質が非表示になるよ<br>
                見やすいね！</span></p>
                
                <p><strong data-i18n="modal.usage.presetTitle" data-i18n-source="potential">プリセット保存・読み込み</strong><br>
                <span data-i18n-html="modal.usage.presetText" data-i18n-source="potential">巡遊者と素質のラベル設定を10個まで保存できるよ。<br>
                ポチポチしたレベルは保存されないようにしてるけど別にそれでいいよね？<br>
                ※更新によりプリセットが呼び出せなくなる可能性があるかもしれません。<br>
                　どうしても忘れたくないプリセットは、スクリーンショットで保管しておくことを推奨します。</span></p>
                
                <p><strong data-i18n="modal.usage.resetCountTitle" data-i18n-source="potential">カウントリセット</strong><br>
                <span data-i18n-html="modal.usage.resetCountText" data-i18n-source="potential">3キャラ分のレベルカウントとコア素質のチェックをデフォに戻すよ。<br>
                塔を登り直す時はコレ！</span></p>
                
                <p><strong data-i18n="modal.usage.resetAllTitle" data-i18n-source="potential">初期化</strong><br>
                <span data-i18n-html="modal.usage.resetAllText" data-i18n-source="potential">すべての設定を初期状態に戻すよ<br>
                具体的に言うと巡遊者スロットが空になって、非表示チェックもなしになるね</span></p>
                
                <p><strong data-i18n="modal.usage.screenshotTitle" data-i18n-source="potential">スクショ</strong><br>
                <span data-i18n-html="modal.usage.screenshotText" data-i18n-source="potential">現在の画面を画像として保存できるよ。<br>
                理想のビルド共有する時とかに使ってね</span></p>
            </div>
        </div>
    </div>

    <!-- 変更履歴モーダル -->
    <div id="changelogModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="modal.changelog.title" data-i18n-source="potential">変更履歴</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <h3>v1.0.1 2025.11.18</h3>
                <ul>
                    <li>フユカに対応。キャラクター選択画面をモーダル形式に変更</li>
                </ul>
                <h3>v1.0.0 2025.11.16</h3>
                <ul>
                    <li>お試しリリース！</li>
                </ul>
                <!-- テンプレ -->
                <!--
                <h3>v1.0.0 YYYY.MM.DD</h3>
                <ul>
                    <li>○○の追加</li>
                </ul>
                -->
            </div>
        </div>
    </div>

    <!-- プリセット名入力モーダル -->
    <div id="presetNameModal" class="modal">
        <div class="modal-overlay"></div>
        <div class="modal-content" style="max-width: 400px;">
            <div class="modal-header">
                <h3 data-i18n="modal.presetName.title" data-i18n-source="potential">プリセット名を入力</h3>
                <button class="modal-close">&times;</button>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 15px;">プリセット<span id="preset-number-display"></span>の名前を入力してください（最大20文字）</p>
                <input type="text" id="preset-name-input" maxlength="20" style="width: 100%; padding: 10px; font-size: 16px; border: 2px solid #ddd; border-radius: 5px; margin-bottom: 15px;">
                <div style="display: flex; gap: 10px; justify-content: flex-end;">
                    <button id="preset-name-cancel" class="btn btn-danger">キャンセル</button>
                    <button id="preset-name-save" class="btn">保存</button>
                </div>
            </div>
        </div>
    </div>

    <!-- キャラクター選択モーダル -->
    <!-- 主力キャラクター選択モーダル -->
    <div class="character-modal" id="character-modal-main">
        <div class="character-modal-overlay"></div>
        <div class="character-modal-content">
            <div class="character-modal-header">
                <h3 class="character-modal-title" data-i18n="characterSelect.mainTitle" data-i18n-source="potential">主力キャラクター選択</h3>
                <button class="character-modal-close">&times;</button>
            </div>
            <div class="character-modal-body">
                <div class="character-modal-grid" data-slot="main"></div>
            </div>
        </div>
    </div>

    <!-- 支援キャラクター1選択モーダル -->
    <div class="character-modal" id="character-modal-support1">
        <div class="character-modal-overlay"></div>
        <div class="character-modal-content">
            <div class="character-modal-header">
                <h3 class="character-modal-title" data-i18n="characterSelect.support1Title" data-i18n-source="potential">支援キャラクター1選択</h3>
                <button class="character-modal-close">&times;</button>
            </div>
            <div class="character-modal-body">
                <div class="character-modal-grid" data-slot="support1"></div>
            </div>
        </div>
    </div>

    <!-- 支援キャラクター2選択モーダル -->
    <div class="character-modal" id="character-modal-support2">
        <div class="character-modal-overlay"></div>
        <div class="character-modal-content">
            <div class="character-modal-header">
                <h3 class="character-modal-title" data-i18n="characterSelect.support2Title" data-i18n-source="potential">支援キャラクター2選択</h3>
                <button class="character-modal-close">&times;</button>
            </div>
            <div class="character-modal-body">
                <div class="character-modal-grid" data-slot="support2"></div>
            </div>
        </div>
    </div>

    <!-- i18n -->
    <script src="js/common/i18n.js"></script>
    <script src="js/common/image-i18n.js"></script>
    <!-- 共通JS -->
    <script src="js/common/utils.js"></script>
    <script src="js/common/menu.js"></script>
    
    <!-- html2canvasライブラリ（スクリーンショット用） -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    
    <!-- ページ固有JS -->
    <script src="js/script.js"></script>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-11QHHPQJCB"></script>
    <script>initGoogleAnalytics('G-11QHHPQJCB');</script>
    </main>

    <footer style="margin-top: 60px; padding: 20px; text-align: center; color: #666; background: #d5cdc7;">
        <p style="color: white; margin-bottom: 10px;">
            <a href="https://x.com/denko_gaminggal" target="_blank" rel="noopener noreferrer" style="color: #0000ee; text-decoration: none; margin: 0 10px;">@denko_gaminggal</a> |
            <a href="https://marshmallow-qa.com/2vagoau6ezqonbq?t=zH1owd&utm_medium=url_text&utm_source=promotion" target="_blank" rel="noopener noreferrer" style="color: #0000ee; text-decoration: none; margin: 0 10px;" data-i18n="footer.marshmallow">マシュマロ（感想・要望など）</a> |
            <a href="privacy.html" target="_blank" rel="noopener noreferrer" style="color: #0000ee; text-decoration: none; margin: 0 10px;" data-i18n="footer.privacy">プライバシーポリシー</a>
        </p>
        <p style="color: black;"><span data-i18n="footer.copyright">©Yostar</span><br>
        <span data-i18n="footer.disclaimer">※本サイトはステラソラの非公式ファンサイトです！</span></p>
    </footer>
</body>
</html>
